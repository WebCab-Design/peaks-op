/*
	version 1.0.7
	title: astatine
	author: Alexander Elias
*/
(function(){function l(a){if(!a)throw Error("ajax: requires options");a.action||(a.action=window.location.pathname);a.enctype||(a.enctype="text/plain");a.method=a.method?a.method.toUpperCase():"GET";a.data&&("GET"===a.method?(a.action=a.action+"?"+g(a.data),a.data=null):-1!==a.enctype.search("application/x-www-form-urlencoded")?a.data=g(a.data):-1!==a.enctype.search("application/json")&&(a.data=JSON.stringify(a.data)));var b=new XMLHttpRequest;b.open(a.method,a.action,!0,a.username,a.password);a.mimeType&&
b.overrideMimeType(a.mimeType);a.withCredentials&&(b.withCredentials=a.withCredentials);if(a.headers)for(var c in a.headers)b.setRequestHeader(c,a.headers[c]);b.onreadystatechange=function(){if(4===b.readyState)if(200<=b.status&&300>b.status){if(a.success)return a.success(b)}else if(a.error)return a.error(b)};b.send(a.data)}function g(a){var b="",c;for(c in a)b=0<b.length?b+"&":b,b=b+encodeURIComponent(c)+"="+encodeURIComponent(a[c]);return b}function m(a){a=a.querySelectorAll("input, textarea");
for(var b={},c=0,d=a.length;c<d;c++){var e=a[c],k=e.name,h=e.type,f=e.value,g=e.checked,e=e.disabled;k&&!e&&"submit"!==h&&"reset"!==h&&"button"!==h&&"file"!==h&&("checkbox"===h?b[k]=g:"radio"===h?g&&(b[k]=f):b[k]=f)}return b}function n(a,b){var c="string"===typeof a?document.querySelector(a):a,d=document.createElement("div");d.classList.add("spinner");c.appendChild(d);c.addEventListener("submit",function(a){a.preventDefault();a=a.target;var c=a.querySelector("[type=submit]");return b(a,c,d)})}function f(a){var b=
document.head,c=b.querySelector("[title=Astatine]"),d;d=".spinner {margin: auto;display: none;width: "+a.thickness+";height: "+a.thickness+";border: "+a.size+" solid "+a.colorBottom+";border-top: "+a.size+" solid "+a.colorTop+";border-radius: 50%;animation: spin 2s linear infinite;-o-animation: spin 2s linear infinite;-moz-animation: spin 2s linear infinite;-webkit-animation: spin 2s linear infinite;}@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }@-o-keyframes spin { 0% { -o-transform: rotate(0deg); } 100% { -o-transform: rotate(360deg); } }@-moz-keyframes spin { 0% { -moz-transform: rotate(0deg); } 100% { -moz-transform: rotate(360deg); } }@-webkit-keyframes spin { 0% { -webkit-transform: rotate(0deg); }100% { -webkit-transform: rotate(360deg); } }";
a=document.createElement("style");d=document.createTextNode(d);a.setAttribute("title","Astatine");a.appendChild(d);c?b.replaceChild(a,c):document.head.appendChild(a)}window.At={setup:{spinner:{s:"3px",t:"15px",ct:"darkgray",cb:"lightgray"}},ajax:l,submit:function(a){if(!a)throw Error("submit: missing options");if(!a.query)throw Error("submit: missing options.query");n(a.query,function(b,c,d){d&&(d.style.display="block");c&&(c.style.display="none");a.data=a.data||m(b);a.action=a.action||b.getAttribute("action");
a.method=a.method||b.getAttribute("method");a.enctype=a.enctype||b.getAttribute("enctype");a.headers=a.headers||{"Content-Type":a.enctype};a.prepare&&a.prepare(a.data);a.success=function(e){d&&(d.style.display="none");c&&(c.style.display="block");b.reset();if(a.complete)return a.complete(null,e)};a.error=function(b){d&&(d.style.display="none");c&&(c.style.display="block");a.data=null;if(a.complete)return a.complete(b,null)};l(a)})},formData:m,serialize:g};Object.defineProperties(window.At.setup.spinner,
{size:{get:function(){return this.s},set:function(a){this.s=a;f(this)}},thickness:{get:function(){return this.t},set:function(a){this.t=a;f(this)}},colorTop:{get:function(){return this.ct},set:function(a){this.ct=a;f(this)}},colorBottom:{get:function(){return this.cb},set:function(a){this.cb=a;f(this)}}});f(window.At.setup.spinner)})();
